(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[420],{5094:function(e,a,t){Promise.resolve().then(t.bind(t,5146))},5146:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return x}});var s=t(7437),i=t(2265),l=t(6506),r=t(4446),n=t(1513),d=t(2333),c=t(9271),o=t(357);async function m(e){let a=o.env.NEXT_PUBLIC_FORMSFREE_ENDPOINT;if(!a)return{ok:!1,status:0};let t=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)});return{ok:t.ok,status:t.status}}var u=t(6463);let p=["Select scam type","Add details","Add TX hashes / refs","Upload evidence","Confirm & submit"];function x(){let[e,a]=(0,i.useState)(0),[t,o]=(0,i.useState)("crypto"),[x,h]=(0,i.useState)(0),[b,f]=(0,i.useState)("USD"),[g,y]=(0,i.useState)(""),[v,j]=(0,i.useState)(""),[N,k]=(0,i.useState)(""),[w,S]=(0,i.useState)(!1),[C,E]=(0,i.useState)(""),[A,O]=(0,i.useState)(!1),[D,T]=(0,i.useState)("idle"),[_,U]=(0,i.useState)(null),[z,B]=(0,i.useState)([]),[M,I]=(0,i.useState)([]),[P,F]=(0,i.useState)([]),[R,X]=(0,i.useState)([]);(0,u.useRouter)();let J=(0,i.useMemo)(()=>(e+1)/p.length*100,[e]);async function W(e){if(!e)return;let a=Array.from(e);F(a),X(await Promise.all(a.map(d.O)))}async function L(){let e=crypto.randomUUID(),a={id:e,createdAt:Date.now(),type:t,amount:x,currency:b,timeline:g,description:v,txHashes:z,bankRefs:M,evidence:P.map((e,a)=>({name:e.name,size:e.size,type:e.type,hash:R[a]})),status:"intake",email:N,messages:[{id:crypto.randomUUID(),from:"system",text:"Report submitted. An agent will be assigned in chat shortly.",at:Date.now()}]};(0,c.MO)(a),U(e);try{let s={id:e,createdAt:new Date(a.createdAt).toISOString(),type:t,amount:x,currency:b,email:N,timeline:g,description:v,txHashes:z,bankRefs:M,evidence:a.evidence},i=await m(s);i.ok||console.warn("Formsfree submission failed or endpoint missing",i.status)}catch(e){console.warn("Formsfree submission error",e)}S(!0)}return(0,s.jsxs)("div",{className:"container-responsive py-10",children:[(0,s.jsx)("h1",{className:"section-title",children:"Fraud Reporting Wizard"}),(0,s.jsx)("p",{className:"section-subtitle mt-2",children:"Provide accurate details to assist recovery."}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)(l.fC,{value:J,className:"relative h-3 w-full overflow-hidden rounded-full bg-slate-200 dark:bg-slate-800","aria-label":"Progress",children:(0,s.jsx)(l.z$,{className:"h-full w-full bg-brand-green transition-transform",style:{transform:"translateX(-".concat(100-J,"%)")}})}),(0,s.jsxs)("p",{className:"mt-2 text-sm text-[var(--muted)]",children:["Step ",e+1," of ",p.length,": ",p[e]]})]}),(0,s.jsxs)("div",{className:"mt-6 card-surface p-6",children:[(0,s.jsxs)(r.M,{mode:"wait",children:[0===e&&(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},children:[(0,s.jsx)("label",{className:"block font-medium",children:"Scam type"}),(0,s.jsx)("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-3 gap-4",role:"radiogroup","aria-label":"Scam type",children:["crypto","fiat","other"].map(e=>(0,s.jsxs)("button",{onClick:()=>o(e),"aria-pressed":t===e,className:"p-4 rounded-lg border ".concat(t===e?"border-brand-green ring-2 ring-brand-green/30":"border-slate-200 dark:border-slate-700"),children:[(0,s.jsx)("div",{className:"font-medium capitalize",children:e}),(0,s.jsx)("div",{className:"text-sm text-[var(--muted)]",children:"crypto"===e?"On-chain fraud including phishing, scams, exchanges.":"fiat"===e?"Banking and card-related fraud.":"Other types of scams."})]},e))})]},"s1"),1===e&&(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},className:"grid gap-4 sm:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Amount"}),(0,s.jsx)("input",{inputMode:"decimal",value:x||"",onChange:e=>h(Number(e.target.value)||0),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-transparent px-3 py-2","aria-label":"Amount"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Currency"}),(0,s.jsx)("input",{value:b,onChange:e=>f(e.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-transparent px-3 py-2","aria-label":"Currency"})]}),(0,s.jsxs)("div",{className:"sm:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Contact Email"}),(0,s.jsx)("input",{type:"email",value:N,onChange:e=>k(e.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-transparent px-3 py-2","aria-label":"Contact Email"})]}),(0,s.jsxs)("div",{className:"sm:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Timeline"}),(0,s.jsx)("input",{value:g,onChange:e=>y(e.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-transparent px-3 py-2","aria-label":"Timeline"})]}),(0,s.jsxs)("div",{className:"sm:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Description"}),(0,s.jsx)("textarea",{value:v,onChange:e=>j(e.target.value),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-transparent px-3 py-2 min-h-[120px]","aria-label":"Description"})]})]},"s2"),2===e&&(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},className:"grid gap-4",children:["fiat"!==t&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Crypto TX hashes (one per line)"}),(0,s.jsx)("textarea",{onChange:e=>B(e.target.value.split(/\n+/).map(e=>e.trim()).filter(Boolean)),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-transparent px-3 py-2 min-h-[120px]","aria-label":"Crypto transaction hashes"})]}),"crypto"!==t&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Bank transfer references (one per line)"}),(0,s.jsx)("textarea",{onChange:e=>I(e.target.value.split(/\n+/).map(e=>e.trim()).filter(Boolean)),className:"mt-1 w-full rounded-md border border-slate-300 dark:border-slate-700 bg-transparent px-3 py-2 min-h-[120px]","aria-label":"Bank transfer references"})]})]},"s3"),3===e&&(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Upload evidence files"}),(0,s.jsx)("input",{type:"file",multiple:!0,accept:"image/*,application/pdf,text/plain",onChange:e=>W(e.target.files),className:"mt-2","aria-label":"Upload evidence files"}),P.length>0&&(0,s.jsx)("ul",{className:"mt-4 divide-y divide-slate-200 dark:divide-slate-800",children:P.map((e,a)=>(0,s.jsx)("li",{className:"py-2 flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,s.jsxs)("div",{className:"text-xs text-[var(--muted)]",children:[(e.size/1024).toFixed(1)," KB • ",e.type||"file",R[a]?" • ".concat(R[a].slice(0,16),"…"):""]})]})},a))})]},"s4"),4===e&&(0,s.jsx)(n.E.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},className:"space-y-3 text-sm",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{className:"p-3 rounded-lg bg-slate-100 dark:bg-slate-800",children:[(0,s.jsx)("div",{className:"text-[var(--muted)]",children:"Type"}),(0,s.jsx)("div",{className:"font-medium capitalize",children:t})]}),(0,s.jsxs)("div",{className:"p-3 rounded-lg bg-slate-100 dark:bg-slate-800",children:[(0,s.jsx)("div",{className:"text-[var(--muted)]",children:"Amount"}),(0,s.jsxs)("div",{className:"font-medium",children:[x," ",b]})]}),(0,s.jsxs)("div",{className:"p-3 rounded-lg bg-slate-100 dark:bg-slate-800 col-span-2",children:[(0,s.jsx)("div",{className:"text-[var(--muted)]",children:"Timeline"}),(0,s.jsx)("div",{className:"font-medium",children:g||"—"})]}),(0,s.jsxs)("div",{className:"p-3 rounded-lg bg-slate-100 dark:bg-slate-800 col-span-2",children:[(0,s.jsx)("div",{className:"text-[var(--muted)]",children:"Description"}),(0,s.jsx)("div",{className:"font-medium whitespace-pre-wrap",children:v||"—"})]}),(0,s.jsxs)("div",{className:"p-3 rounded-lg bg-slate-100 dark:bg-slate-800 col-span-2",children:[(0,s.jsx)("div",{className:"text-[var(--muted)]",children:"Evidence"}),(0,s.jsxs)("div",{className:"font-medium",children:[P.length," file(s)"]})]})]})},"s5")]}),(0,s.jsxs)("div",{className:"mt-6 flex justify-between",children:[(0,s.jsx)("button",{onClick:function(){a(e=>Math.max(e-1,0))},disabled:0===e,className:"button-secondary disabled:opacity-50",children:"Back"}),e<p.length-1?(0,s.jsx)("button",{onClick:function(){a(e=>Math.min(e+1,p.length-1))},className:"button-primary",children:"Next"}):(0,s.jsx)("button",{onClick:L,className:"button-primary",children:"Submit"})]})]}),w&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 grid place-items-center bg-black/40 p-4",children:(0,s.jsxs)("div",{role:"dialog","aria-modal":!0,className:"w-full max-w-lg card-surface p-6",children:["idle"===D&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Almost there — verify your email"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-[var(--muted)]",children:"We sent a 6‑digit code to your email. Enter it below to continue."}),(0,s.jsxs)("div",{className:"mt-4 flex items-center gap-2",children:[(0,s.jsx)("input",{inputMode:"numeric",pattern:"\\\\d*",maxLength:6,value:C,onChange:e=>E(e.target.value.replace(/[^0-9]/g,"")),className:"flex-1 rounded-md border border-slate-300 dark:border-slate-700 bg-transparent px-3 py-2 tracking-widest text-center","aria-label":"Email verification code"}),(0,s.jsx)("button",{disabled:6!==C.length||A,onClick:()=>{O(!0),setTimeout(()=>{O(!1),T("processing")},800)},className:"button-primary disabled:opacity-50",children:"Verify"})]}),(0,s.jsx)("p",{className:"mt-2 text-xs text-[var(--muted)]",children:"Didn’t receive the code? Check your spam folder."})]}),"processing"===D&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Setting things up"}),(0,s.jsxs)("ul",{className:"mt-4 space-y-2 text-sm",children:[(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"h-2 w-2 rounded-full bg-brand-green animate-pulse"})," Verifying details…"]}),(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"h-2 w-2 rounded-full bg-brand-green animate-pulse"})," Analyzing report…"]}),(0,s.jsxs)("li",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"h-2 w-2 rounded-full bg-brand-green animate-pulse"})," Creating dashboard…"]})]}),setTimeout(()=>T("done"),1800)]}),"done"===D&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"What happens next"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-[var(--muted)]",children:"Your Dashboard access portal will be delivered to your verified email address within the next 30 minutes. You’ll also receive a welcome email within 5 minutes containing your unique access link."}),(0,s.jsxs)("div",{className:"mt-4 flex items-center gap-2",children:[(0,s.jsx)("a",{href:_?"/dashboard?id=".concat(_):"#",className:"button-primary",children:"Open dashboard now"}),(0,s.jsx)("button",{onClick:()=>S(!1),className:"button-secondary",children:"Close"})]})]})]})})]})}},2333:function(e,a,t){"use strict";async function s(e){let a=await e.arrayBuffer();return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",a))).map(e=>e.toString(16).padStart(2,"0")).join("")}t.d(a,{O:function(){return s}})},9271:function(e,a,t){"use strict";t.d(a,{Ee:function(){return i},MO:function(){return l},S:function(){return r}});let s="csr_cases_v1";function i(){try{let e=localStorage.getItem(s);if(!e)return[];return JSON.parse(e)}catch(e){return[]}}function l(e){let a=i(),t=a.findIndex(a=>a.id===e.id);t>=0?a[t]=e:a.unshift(e),localStorage.setItem(s,JSON.stringify(a))}function r(e){return i().find(a=>a.id===e)||null}}},function(e){e.O(0,[513,881,971,23,744],function(){return e(e.s=5094)}),_N_E=e.O()}]);